{% extends 'base.html' %}
{% load static %}
{% load crispy_forms_tags %}

{% block title %}
  TKS | {{ request.user.last_name }} Profile
{% endblock %}

{% block style %}
  <link rel="stylesheet" href="{% static 'css/sf/profile_sf.css' %}" />
  <link rel="stylesheet" href="{% static 'css/sf/navbar_sf.css' %}" />  
{% endblock %}

{% block main_content %}
    {% include 'sf/navbar_sf.html' %}

    <main>
        {% if messages %}
            {% for message in messages %}
                {% if message.extra_tags == 'pass_change_success' %}
                    <div class="alert alert-success alert-dismissible fade show" role="alert">
                        {{ message }}
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                {% endif %}
            {% endfor %}
        {% endif %}
        <div class="row m-0 p-5">
            <div class="col-xl-4">
                <!-- Profile picture card-->
                <div class="card mb-4 mb-xl-0">
                    <div class="card-header">Profile Picture</div>
                    <div class="card-body text-center">
                        <!-- Profile picture image-->
                        <img class="img-account-profile rounded-circle mb-2" src="{% static 'res/test.png' %}" alt="">
                        <!-- Profile picture help block-->
                        <div class="small font-italic text-muted mb-4">Set your profile image</div>
                        <!-- Profile picture upload button-->
                        <button class="btn btn-primary" type="button">Upload new image</button>
                    </div>
                </div>
            </div>
            <div class="col-xl-8">
                <!-- Account details card-->
                <div class="card mb-4">
                    <div class="card-header">Account Details</div>
                    <div class="card-body">
                        <form action="{% url 'profile_sf' %}" method="POST">
                            {% csrf_token %}
                            <!-- Form Group (username)-->
                            <div class="mb-3">
                                {{ form.username|as_crispy_field }}
                            </div>
                            <!-- Form Group (email)-->
                            <div class="mb-3">
                                {{ form.email|as_crispy_field }}
                            </div>
                            <!-- Form Row-->
                            <div class="row gx-3 mb-3">
                                <!-- Form Group (first name)-->
                                <div class="col-md-6">
                                    {{ form.first_name|as_crispy_field }}
                                </div>
                                <!-- Form Group (last name)-->
                                <div class="col-md-6">
                                    {{ form.last_name|as_crispy_field }}
                                </div>
                            </div>
                            <!-- Form Row-->
                            <div class="row gx-3 mb-3">
                                <!-- Form Group (role)-->
                                <div class="col-md-6">
                                    {{ form.role|as_crispy_field }}
                                </div>
                                <!-- Form Group (tupc_id)-->
                                <div class="col-md-6">
                                    {{ form.tupc_id|as_crispy_field }}
                                </div>
                            </div>
                            <!-- Save changes button-->
                            <button class="btn btn-primary" type="submit">Save changes</button>
                        </form>
                    </div>
                </div>
                <!-- Change account password -->
                <div class="card mb-4">
                    <div class="card-header">Account Password</div>
                    <div class="card-body">
                        <form action="{% url 'change_password_sf' request.user.pk %}" method="get">
                            <button class="btn btn-secondary" type="submit">Change my password</button>
                        </form>  
                    </div>   
                </div>
            </div>
        </div>
    </main>
{% endblock %}

{% block js %}
<script type="text/javascript" src="{% static 'js/sf/profile_sf.js' %}"></script>
{% endblock %} 